(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a(406)},165:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){},193:function(e,t,a){},195:function(e,t,a){},200:function(e,t,a){},202:function(e,t,a){},399:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},400:function(e,t,a){},402:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(68),o=a.n(s),l=(a(165),a(2)),c=a(3),u=a(4),i=a(6),m=a(5),h=a(7),p=(a(167),a(169),a(9)),d=a.n(p),g=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e){var a=new FormData;return Object.keys(e).forEach(function(t){return a.append(t,e[t])}),t.service.post("/signup",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},this.login=function(e){return t.service.post("/login",e).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/auth"),withCredentials:!0})},f=a(411),E=a(412),v=(a(193),a(40)),b=a(409),R=(a(195),a(408)),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.email,s=a.password;e.authService.signup({username:n,email:r,password:s}).then(function(t){e.setState({username:"",email:"",password:"",redirect:!0},function(){return e.props.getUser(t)})})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(l.a)({},e.state,Object(v.a)({},n,r)))},e.state={username:"",email:"",password:"",redirect:!1},e.authService=new g,e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state&&this.state.redirect?r.a.createElement(b.a,{to:"/profile"}):r.a.createElement("div",{class:"register-container"},r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:this.handleFormSubmit,class:"form"},r.a.createElement("label",null,"Nombre de usuario"),r.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",name:"email",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("div",{class:"center-text"},r.a.createElement("p",null,"\xbfTienes una cuenta?"),r.a.createElement(R.a,{id:"orange-text",to:"/login"},"Login")))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.authService.login({username:n,password:r}).then(function(t){e.setState(Object(l.a)({},e.state,{redirect:!0}),function(){e.props.getUser(t)})})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(v.a)({},n,r))},e.state={username:"",password:"",redirect:!1},e.authService=new g,e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?(console.log("entra"),r.a.createElement(b.a,{to:"/profile"})):r.a.createElement("div",{class:"register-container adjust-login-container"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit,class:"form"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("div",{class:"center-text"},r.a.createElement("p",null,"\xbfNo tienes cuenta?"),r.a.createElement(R.a,{id:"orange-text",to:"/signup"},"Reg\xedstrate")))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggleSignupLogin=function(){a.setState(Object(l.a)({},a.state,{showSignupOrLogin:!0}))},a.props.fetchUser(),a.AuthService=new g,a.state={showSignupOrLogin:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{class:"register"},r.a.createElement("div",null,r.a.createElement(E.a,{path:"/signup",render:function(){return r.a.createElement(y,{getUser:e.props.getUser,fetchUser:e.props.fetchUser})}})),r.a.createElement("div",{class:"register-buttons"},r.a.createElement(E.a,{path:"/login",render:function(){return r.a.createElement(j,{getUser:e.props.getUser})}}),this.state.showSignupOrLogin?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("button",null,r.a.createElement(R.a,{onClick:this.toggleSignupLogin,to:"/signup"},"Reg\xedstrate")),r.a.createElement("button",null,r.a.createElement(R.a,{onClick:this.toggleSignupLogin,to:"/login"},"Login"))))),r.a.createElement("div",{class:"background-image"},r.a.createElement("img",{src:"/images/barimg.png",alt:""}))),r.a.createElement("section",{className:"mainText"},r.a.createElement("h3",null,"Rutas gastron\xf3micas por el mundo"),r.a.createElement("p",null,"Imagina un viaje repleto de detalles gastron\xf3micos, en el que disfrutar de cada lugar y de su cultura gastron\xf3mica. Olv\xeddate de reservas, solo tendr\xe1s que disfrutar del viaje . Descubre en nuestra selecci\xf3n de rutas una forma diferente de viajar por Espa\xf1a. Podr\xe1s crear tu propia ruta comiendo en los restaurnates que desees, disfrutando as\xed de la mejor gastronom\xeda local. En The Food Routes, no tendr\xe1s que preocuparte por ningun detalle, tan solo de disfrutar de las mejores propuestas para hacer de tu viaje un viaje de ensue\xf1o."),r.a.createElement("hr",null)),r.a.createElement("section",{class:"carrusel-img"},r.a.createElement("img",{src:"/images/carrusel.png",alt:""})),r.a.createElement("hr",null),r.a.createElement("section",{className:"mainText"},r.a.createElement("h3",null,"Rutas gastron\xf3micas por el mundo"),r.a.createElement("p",null,"Crea tu propia ruta o simplemente inscr\xedbite en las creadas por otros usuarios. Podr\xe1s conocer nuevos lugares, disfrutar de los mejores restaurantes seg\xfan tus gustos y conocer\xe1s a los pr\xf3ximos compa\xf1eros de aventura.")),r.a.createElement("footer",null,"Copyright 2018 Jorge Devesa & \xc1ngel Terr\xf3n"))}}]),t}(n.Component),w=(a(200),a(202),a(41)),C=a(47),N=a(399),S=Object(w.compose)(Object(w.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB8NzS5RBf23YH2cAwWi8t0HlpwPfqB6no&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),C.withScriptjs,C.withGoogleMap,Object(w.lifecycle)({componentDidMount:function(){var e=this,t=this.props.sendRouteData.restaurants,a=new google.maps.DirectionsService,n=[];t.map(function(e,a){console.log(e),0!==a&&a!==t.length-1&&n.push({location:new google.maps.LatLng(e.coordinates.latitude,e.coordinates.longitude)})}),console.log(n),a.route({origin:new google.maps.LatLng(t[0].coordinates.latitude,t[0].coordinates.longitude),waypoints:n,destination:new google.maps.LatLng(t[t.length-1].coordinates.latitude,t[t.length-1].coordinates.longitude),travelMode:google.maps.TravelMode.WALKING},function(t,a){a===google.maps.DirectionsStatus.OK?e.setState({directions:t}):console.error("error fetching directions ".concat(t))})},componentDidUpdate:function(e){var t=this,a=this.props.sendRouteData.restaurants,n=[];a.map(function(e,t){console.log(e),0!==t&&t!==a.length-1&&n.push({location:new google.maps.LatLng(e.coordinates.latitude,e.coordinates.longitude)})}),(new google.maps.DirectionsService).route({origin:new google.maps.LatLng(a[0].coordinates.latitude,a[0].coordinates.longitude),destination:new google.maps.LatLng(a[a.length-1].coordinates.latitude,a[a.length-1].coordinates.longitude),travelMode:google.maps.TravelMode.WALKING,waypoints:n},function(e,a){a===google.maps.DirectionsStatus.OK?t.setState({directions:e}):console.error("error fetching directions ".concat(e))})}}))(function(e){return r.a.createElement(C.GoogleMap,{defaultZoom:7,defaultCenter:{lat:-34.397,lng:150.644},defaultOptions:{styles:N}},e.directions&&r.a.createElement(C.DirectionsRenderer,{directions:e.directions,options:{polylineOptions:{strokeColor:"orange"}}}))}),T=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.sendRouteData?r.a.createElement("div",null,r.a.createElement(S,{sendRouteData:this.props.sendRouteData})):r.a.createElement("p",null)}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getUserRoutes=function(){return a.service.get("/").then(function(e){var t=e.data.track.createdTrack;return a.setState(Object(l.a)({},a.state,{userRoutes:t})),e}).catch(function(e){return console.log(e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.createRoutes,n=t.routesName,r=t.category,s=t.routesType;a.getRoute({routesName:n,category:r,routesType:s}).then(function(e){e.data._id;a.props.createRoutes(e.data),a.getUserRoutes()})},a.getRoute=function(e){return a.service.post("/createTrack",e).then(function(e){return e})},a.handleFormSubmitUPDATE=function(e,t){e.preventDefault();var n=a.state.createRoutes,r=n.routesName,s=n.category,o=n.routesType;a.updateRoute({routesName:r,category:s,routesType:o},t).then(function(e){a.getUserRoutes()})},a.handleChangeUPDATE=function(e){var t=e.target,n=t.name,r=t.value,s=a.state.createRoutes;s[n]=r,a.setState(Object(l.a)({},a.state,{createRoutes:s}))},a.updateRoute=function(e,t){return a.service.post("/".concat(t,"/update"),e).then(function(e){return e})},a.deleteRoute=function(e,t){return e.preventDefault(),a.service.post("/".concat(t,"/delete"),t).then(function(e){return a.getUserRoutes(),e})},a.showRoutesDetails=function(e){a.setState(Object(l.a)({},a.state,{showRouteData:e})),a.props.scrollToRecipe()},a.showAllYourRoutes=function(){a.setState(Object(l.a)({},a.state,{showRouteData:null}))},a.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/tracks"),withCredentials:!0}),a.state={createRoutes:{routesName:"",category:"",routesType:""},userRoutes:[{}],restaurant:null,showRouteData:null},a.routes=[],a.getUserRoutes(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.userRoutes?r.a.createElement("div",{className:"show-route-container"},this.state.userRoutes.map(function(t,a){return r.a.createElement("div",{className:"yourRoutes-container",key:t._id},r.a.createElement("div",null,r.a.createElement("div",{className:"each-Route pointer",onClick:function(){return e.showRoutesDetails(t)},style:{backgroundImage:"url(".concat(t.image,")")}},r.a.createElement("div",{className:"route-details"},r.a.createElement("h3",null,t.routesName),r.a.createElement("p",null,"Categor\xeda: ",t.category)))),r.a.createElement("form",{className:"form-container",onSubmit:function(a){return e.handleFormSubmitUPDATE(a,t._id)}},r.a.createElement("label",null,"Actualizar rutas: "),r.a.createElement("input",{type:"text",name:"routesName",onChange:function(t){return e.handleChangeUPDATE(t)},placeholder:"Nombre de la ruta",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"category",onChange:function(t){return e.handleChangeUPDATE(t)},placeholder:"Categor\xeda",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"routesType",onChange:function(t){return e.handleChangeUPDATE(t)},placeholder:"Tipo de ruta",autoComplete:"off"}),r.a.createElement("input",{type:"submit"})),r.a.createElement("form",{className:"form-delete",onSubmit:function(a){return e.deleteRoute(a,t._id)}},r.a.createElement("input",{value:"X",type:"submit"})))})):"no hay rutas",a=this.state.showRouteData?r.a.createElement("div",{className:"menu-half-routes"},r.a.createElement("div",{className:"menu-routes-container"},r.a.createElement("h1",{className:"rutasTitle"},"Rutas:"),this.state.userRoutes.map(function(t){return r.a.createElement("div",{className:"each-route-container pointer",onClick:function(){return e.showRoutesDetails(t)}},r.a.createElement("h3",null,t.routesName),r.a.createElement("h5",null,"Categor\xeda :",t.category),r.a.createElement("h5",null,"Duraci\xf3n: ",t.duration),r.a.createElement("h5",null,"Fecha: ",t.date),r.a.createElement("h5",null,"Hora inicio: ",t.hour),r.a.createElement("hr",null))}),r.a.createElement("button",{onClick:this.showAllYourRoutes},"Mostrar todas tus rutas")),r.a.createElement("div",{id:"stops-container"},r.a.createElement("h3",{className:"rutasTitle"},"Itinerario:"),this.state.showRouteData.restaurants.map(function(e,t){return r.a.createElement("div",{className:"each-stop-container"},r.a.createElement("img",{src:e.restaurantPhoto}),r.a.createElement("h2",null,r.a.createElement("img",{src:"./images/ImportedLayers.png",alt:""})," ",t+1,": ",e.restaurantName),r.a.createElement("h4",null,"Puntuaci\xf3n: ",e.rating,", Precio:"," ",e.price,", Tel\xe9fono:"," ",e.phone," "))}),r.a.createElement("div",{className:"map"},r.a.createElement(T,{sendRouteData:this.state.showRouteData})))):r.a.createElement("div",null,t);return r.a.createElement("div",{className:"yourRoutes-big-container"},r.a.createElement("h1",null,"Tus rutas"),a)}}]),t}(n.Component),U=a(159),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.restaurant,n=t.term,r=t.location;""===n?a.setState(Object(l.a)({},a.state,{inputClassTerm:"inputError",inputClassLocation:null})):""===r?a.setState(Object(l.a)({},a.state,{inputClassLocation:"inputError",inputClassTerm:null})):""!==n&&""!==r&&a.props.getRestaurants({term:n,location:r}).then(function(e){a.props.sendRestaurants(e),a.setState(Object(l.a)({},a.state,{errorTerm:!1,errorLocation:!1}))})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,s=a.state.restaurant;s[n]=r,a.setState(Object(l.a)({},a.state,{restaurant:s}))},a.state={restaurant:{term:"",location:""},preload:!1,inputClassTerm:null,inputClassLocation:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"center-form-yelp",onSubmit:function(t){return e.handleFormSubmit(t,e.props.state)}},r.a.createElement("input",{className:this.state.inputClassTerm,type:"text",name:"term",placeholder:"Buscar restaurantes",onChange:function(t){return e.handleChange(t)},autoComplete:"off"}),r.a.createElement("input",{className:this.state.inputClassLocation,type:"text",name:"location",placeholder:"Ubicaci\xf3n",onChange:function(t){return e.handleChange(t)},autoComplete:"off"}),r.a.createElement("input",{value:"Buscar restaurantes",type:"submit"})))}}]),t}(n.Component),x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state.createRoutes,n=a.routesName,r=a.category,s=a.photo,o=a.date,c=a.hour,u=a.duration;e.setState(Object(l.a)({},e.state,{preload:!0})),e.getRoute({routesName:n,category:r,photo:s,date:o,hour:c,duration:u}).then(function(t){e.props.createRoutes(t.data),e.setState(Object(l.a)({},e.props.state,{createRoutes:null,preload:!1}))})},e.handleChangeCREATE=function(t){var a=e.state.createRoutes,n=t.target,r=n.name,s=n.value;"photo"===r?(a[r]=t.target.files[0],e.setState(Object(l.a)({},e.state,{newRoute:a})),console.log(e.state.createRoutes)):(a[r]=s,e.setState(Object(l.a)({},e.state,{newRoute:a})))},e.getRoute=function(t){var a=new FormData;return Object.keys(t).forEach(function(e){return a.append(e,t[e])}),a.append("selectedRestaurants",JSON.stringify(e.state.restaurants)),e.service.post("/tracks/createTrack",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e})},e.sendRestaurants=function(t){e.setState(Object(l.a)({},e.state,{restaurant:t}))},e.addRestaurant=function(t){var a=Object(U.a)(e.state.restaurants);a.push(t.e),e.setState(Object(l.a)({},e.state,{restaurants:a}))},e.getRestaurants=function(t,a){return e.setState(Object(l.a)({},e.state,{preload:!0})),e.service.post("/yelp/yelp",{term:t,location:a}).then(function(t){return e.setState(Object(l.a)({},e.props.state,{preload:!1})),t.data.map(function(e){return{e:e}})})},e.state={createRoutes:{routesName:"",category:"",routesType:""},restaurant:null,restaurants:[],preload:!1},e.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api"),withCredentials:!0}),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.restaurant?r.a.createElement("div",{className:"show-route-container"},this.state.restaurant.map(function(t){return r.a.createElement("div",{className:"yourRoutes-container"},r.a.createElement("div",{className:"each-Route",style:{backgroundImage:"url(".concat(t.e.image_url,")")}}),r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,t.e.name),r.a.createElement("p",null,t.e.location.address1),r.a.createElement("p",null,t.e.price),r.a.createElement("button",{onClick:function(){return e.addRestaurant(t)}},"A\xf1adir parada")))})):r.a.createElement("div",null),a="A\xfan no has seleccionado ning\xfan restaurante.";this.state.restaurants.length&&(a=this.state.restaurants.map(function(e){return r.a.createElement("p",null,"- ",e.name)}));var n=this.state.preload?r.a.createElement("div",{className:"preload-container"},r.a.createElement("div",{className:"preload"},r.a.createElement("img",{src:"/images/gif-preload.gif"}))):r.a.createElement("div",null);return r.a.createElement("div",null,n,r.a.createElement("div",{className:"yourRoutes-big-container"},r.a.createElement("h1",null,"Crear rutas"),r.a.createElement("div",{className:"center-form sticky"},r.a.createElement("label",null,"Restaurantes a\xf1adidos:"),r.a.createElement("label",null,a)),r.a.createElement(D,{state:this.state,scrollToRecipe:this.props.scrollToRecipe,sendRestaurants:this.sendRestaurants,getRestaurants:this.getRestaurants,restaurants:this.props.restaurants,handleFormSubmit:this.handleFormSubmit,handleChange:this.handleChange}),r.a.createElement("form",{className:"center-form",onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{clasName:"form-inputs"},r.a.createElement("input",{type:"text",name:"routesName",onChange:function(t){return e.handleChangeCREATE(t)},placeholder:"Nombre de la ruta",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"category",onChange:function(t){return e.handleChangeCREATE(t)},placeholder:"Categor\xeda",autoComplete:"off"}),r.a.createElement("input",{type:"date",name:"date",onChange:function(t){return e.handleChangeCREATE(t)},placeholder:"Fecha",autoComplete:"off"}),r.a.createElement("input",{type:"time",name:"hour",onChange:function(t){return e.handleChangeCREATE(t)},placeholder:"Hora de inicio",autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"duration",onChange:function(t){return e.handleChangeCREATE(t)},placeholder:"Duraci\xf3n",autoComplete:"off"}),r.a.createElement("input",{className:"file-input",type:"file",name:"photo",onChange:function(t){return e.handleChangeCREATE(t)}})),r.a.createElement("div",{className:"form-inputs"},r.a.createElement("input",{value:"Crear ruta",type:"submit"}))),r.a.createElement("div",null),t))}}]),t}(n.Component),A=(a(400),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).showSavedRoutesButton=function(){a.setState(Object(l.a)({},a.state,{showSavedRoutes:!0}))},a.getUserRoutes=function(){return a.service.get("/").then(function(e){var t=e.data.track;return a.setState(Object(l.a)({},a.state,{user:t})),console.log(a.state.user),e}).catch(function(e){return console.log(e)})},a.state={user:a.props.user,showSavedRoutes:null},a.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/tracks"),withCredentials:!0}),a.getUserRoutes(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"yourRoutes-big-container"},r.a.createElement("h1",{className:"align-center"},"Tus rutas guardadas"),r.a.createElement("div",{className:"show-route-container"},this.state.user.savedRoutes.map(function(e){return r.a.createElement("div",{className:"yourRoutes-container"},r.a.createElement("div",{className:"each-Route",style:{backgroundImage:"url(".concat(e.image,")")}}),console.log(e),r.a.createElement("h2",null,e.routesName),r.a.createElement("h3",null,e.routesType),r.a.createElement("h4",null,e.category))}))))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getUserRoutes=function(){return a.service.get("/tracks").then(function(e){var t=e.data.track.createdTrack,n=[];t.forEach(function(e){return n.push(e.qualification.reduce(function(e,t){return e+t})/e.qualification.length)});var r=(n.reduce(function(e,t){return e+t})/n.length).toFixed(1);a.setState(Object(l.a)({},a.state,{rating:r}));var s=[];t.forEach(function(e){return s.push(e.qualification.length)});var o=s.reduce(function(e,t){return e+t});a.setState(Object(l.a)({},a.state,{votes:o}))}).catch(function(e){return console.log(e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.user,n=t.username,r=t.email,s=t.photo;a.updateProfile({username:n,email:r,photo:s})},a.handleChange=function(e){var t=Object(l.a)({},a.state.user),n=e.target,r=n.name,s=n.value;"photo"===r?(t[r]=e.target.files[0],a.setState(Object(l.a)({},a.state,{user:t}))):(t[r]=s,a.setState(Object(l.a)({},a.state,{user:t})))},a.updateProfile=function(e){console.log(e);var t=new FormData;return Object.keys(e).forEach(function(a){return t.append(a,e[a])}),a.service.post("/editProfile/details",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.props.getUser(e.data)})},a.createRouteButton=function(){a.state.createRoutesToggle?a.setState(Object(l.a)({},a.state,{createRoutesToggle:null})):a.setState(Object(l.a)({},a.state,{createRoutesToggle:!0})),a.scrollToRecipe()},a.createRoutes=function(e){a.setState(Object(l.a)({},a.state,{createRoutesToggle:null}))},a.showUpdateProfileButton=function(){a.state.showUpdateProfileButton?a.setState(Object(l.a)({},a.state,{showUpdateProfileButton:null})):a.setState(Object(l.a)({},a.state,{showUpdateProfileButton:!0}))},a.changeRoutes=function(){a.state.yourRoutes?a.setState(Object(l.a)({},a.state,{yourRoutes:null})):a.setState(Object(l.a)({},a.state,{yourRoutes:!0})),a.scrollToRecipe()},a.scrollToRecipe=function(){window.scrollBy({top:document.querySelector("body").clientHeight,left:0,behavior:"smooth"})},a.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api"),withCredentials:!0}),a.state={user:a.props.user,userRoutes:a.props.user,createRoutesToggle:null,showUpdateProfileButton:!1,yourRoutes:!0,rating:null,votes:null},a.getUserRoutes(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a,n=this;this.state.rating&&(t=(e=this.state.rating.toString().split("."))[1],a=e[0]);var s=this.state.yourRoutes?r.a.createElement("div",null,r.a.createElement("button",{className:"align-buttoms",onClick:this.changeRoutes},"Rutas Guardadas"),r.a.createElement(k,{scrollToRecipe:this.scrollToRecipe,userRoutes:this.userRoutes,createRoutes:this.props.createRoutes,handleFormSubmit:this.handleFormSubmit,handleChange:this.handleChange})):r.a.createElement("div",null,r.a.createElement("button",{className:"align-buttoms",onClick:this.changeRoutes},"Tus publicaciones"),r.a.createElement(A,{user:this.state.user})),o=this.state.createRoutesToggle?r.a.createElement("section",{className:"routes-from-profile"},r.a.createElement("button",{className:"align-buttoms fix-button",onClick:this.createRouteButton},"Tus rutas"),r.a.createElement(x,{scrollToRecipe:this.scrollToRecipe,createRoutes:this.createRoutes,getRoutes:this.getRoutes,state:this.state})):r.a.createElement("div",null,r.a.createElement("button",{className:"align-buttoms",onClick:this.createRouteButton},"Crear Ruta"),s),l=this.state.showUpdateProfileButton?r.a.createElement("div",null,r.a.createElement("button",{className:"center-block",onClick:this.showUpdateProfileButton},"Volver"),r.a.createElement("div",null,r.a.createElement("form",{className:"flex-row appear",onSubmit:function(e){return n.handleFormSubmit(e)}},r.a.createElement("input",{type:"text",name:"username",value:this.state.user.username,autoComplete:"off",onChange:function(e){return n.handleChange(e)}}),r.a.createElement("input",{type:"email",name:"email",value:this.state.user.email,autoComplete:"off",onChange:function(e){return n.handleChange(e)}}),r.a.createElement("input",{type:"text",name:"taste",autoComplete:"off",value:"Tus gustos"}),r.a.createElement("input",{className:"file-input",type:"file",name:"photo",onChange:function(e){return n.handleChange(e)}}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Actualizar"}))))):r.a.createElement("button",{className:"center-block",onClick:this.showUpdateProfileButton},"Editar perfil");return r.a.createElement("div",null,r.a.createElement("div",{id:"profile-details"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"profile-photo"},r.a.createElement("img",{src:this.state.user.imgPath,alt:""})),r.a.createElement("div",{className:"profile-content"},r.a.createElement("div",{className:"name-and-rating"},r.a.createElement("div",{id:"profile-details-container"},r.a.createElement("h1",{className:"fix-h1"},this.state.user.username),r.a.createElement("h4",null,this.state.user.email)),r.a.createElement("div",{className:"social-position"},r.a.createElement(R.a,{to:"/ranking",className:"link"},r.a.createElement("div",{className:"center-column"},r.a.createElement("h2",{className:"rating"},this.state.user.rankingPosition,"\xba"),r.a.createElement("p",null,"Clasificaci\xf3n"))),r.a.createElement("div",{className:"center-column"},r.a.createElement("h2",{className:"rating"},this.state.votes),r.a.createElement("p",null,"Votos")),r.a.createElement("div",{className:"center-column"},r.a.createElement("h2",{className:"rating"},t,"'",r.a.createElement("sup",{className:"superindex-profile"},a)),r.a.createElement("p",null,"Media de votos")))),l))),o)}}]),t}(n.Component),M=(a(402),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",null),r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,r.a.createElement("img",{className:"logo",src:"./images/logo.png"})),r.a.createElement("div",{className:"navbar-images"},r.a.createElement(R.a,{to:"/profile"},r.a.createElement("img",{src:"./images/manifest.png",alt:"profile"})),r.a.createElement(R.a,{to:"/allRoutes"},r.a.createElement("img",{src:"./images/ruta.svg",alt:"profile"})),r.a.createElement(R.a,{to:"/ranking"},r.a.createElement("img",{className:"trophy-img",src:"./images/trophy-2707775.png",alt:"ranking"})),r.a.createElement("img",{src:"./images/logout.png",alt:"logout",onClick:this.props.logout})))))}}]),t}(n.Component)),I=(a(404),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).sendRating=function(e,t){return a.service.post("/qualification",{rating:e,_id:t}).then(function(e){a.setState(Object(l.a)({},a.state,{burgerImage:"burgerImageSelected"})),a.props.getAllRoutes()}).catch(function(e){return console.log(e.data)})},a.state={burgerImage:"burgerImage"},a.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/tracks"),withCredentials:!0}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("img",{onClick:function(){return e.sendRating(e.props.index,e.props.element._id)},className:this.state.burgerImage,src:"images/hamburger.png"}))}}]),t}(n.Component)),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).changeButtonState=function(){a.setState(Object(l.a)({},a.state,{buttonShow:!1}))},a.showMap=function(){a.state.showMap?a.setState(Object(l.a)({},a.state,{showMap:null})):a.setState(Object(l.a)({},a.state,{showMap:!0}))},a.showMore=function(){a.state.showMore?a.setState(Object(l.a)({},a.state,{showMore:null,showMoreClasse:"eachRoute-container"})):a.setState(Object(l.a)({},a.state,{showMore:!0,showMoreClasse:"eachRoute-containershowing"}))},a.state={buttonShow:!0,showMap:null,showMore:null,showMoreClase:"eachRoute-container"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a,n=this,s=this.state.buttonShow?r.a.createElement("button",{className:"follow-button",onClick:function(e){n.props.followTrack(e,o._id),n.changeButtonState()}},"A\xf1adir"):r.a.createElement("button",{className:"follow-button savedRouteButton"},"Ruta a\xf1adida"),o=this.props.element;return o.qualification.length>0&&(t=(e=(o.qualification.reduce(function(e,t){return e+t})/o.qualification.length).toFixed(1).toString().split("."))[1],a=e[0]),r.a.createElement("div",{className:"yourRoutes-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"each-Route",style:{backgroundImage:"url(".concat(o.image,")")}},r.a.createElement(R.a,{to:"/usersRoutes/".concat(o.creatorID[0]._id)},r.a.createElement("div",{className:"show-user-on-routes"},r.a.createElement("img",{src:o.creatorID[0].imgPath}),r.a.createElement("label",{className:"margin-user-creator"},o.creatorID[0].username)))),r.a.createElement("div",{className:"form-container margin-bottom-container-routes align-center"},r.a.createElement("h3",null,o.routesName),r.a.createElement("br",null),r.a.createElement("h5",{className:"rating"},"Puntuaci\xf3n:"),r.a.createElement("h1",{className:"rating"},a,r.a.createElement("sup",{className:"superindex"},"'",t)),r.a.createElement("div",{className:"burgerImageContainer"},r.a.createElement(I,{getAllRoutes:this.props.getAllRoutes,sendRating:this.sendRating,burgerImage:this.state.burgerImage,index:"1",element:o}),r.a.createElement(I,{getAllRoutes:this.props.getAllRoutes,sendRating:this.sendRating,burgerImage:this.state.burgerImage,index:"2",element:o}),r.a.createElement(I,{getAllRoutes:this.props.getAllRoutes,sendRating:this.sendRating,burgerImage:this.state.burgerImage,index:"3",element:o}),r.a.createElement(I,{getAllRoutes:this.props.getAllRoutes,sendRating:this.sendRating,burgerImage:this.state.burgerImage,index:"4",element:o}),r.a.createElement(I,{getAllRoutes:this.props.getAllRoutes,sendRating:this.sendRating,burgerImage:this.state.burgerImage,index:"5",element:o})),r.a.createElement("p",null,"votos: ",void 0),this.state.showMore?o.restaurants.map(function(e){return r.a.createElement("div",{className:"each-stop-on-target"},r.a.createElement("hr",null),r.a.createElement("div",{className:"flex-space-between"},r.a.createElement("a",{href:e.url},r.a.createElement("h4",null,r.a.createElement("img",{src:"./images/ImportedLayers.png",alt:""}),e.restaurantName))),r.a.createElement("div",{className:"restaurant-detail-container"},r.a.createElement("h5",null," Puntuaci\xf3n: ",e.rating),r.a.createElement("h5",null,e.location.city)),r.a.createElement("h4",{className:"showMore pointer",onClick:n.showMore},"Ocultar paradas"))}):r.a.createElement("h4",{className:"showMore pointer",onClick:this.showMore},"Ver paradas"),this.state.showMap?r.a.createElement("div",null,r.a.createElement(T,{sendRouteData:o}),r.a.createElement("h4",{className:"pointer",onClick:this.showMap},"Ocultar mapa")):r.a.createElement("h4",{className:"pointer",onClick:this.showMap},"Ver en el mapa"),r.a.createElement("div",{className:"appear"}),s)))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).getAllRoutes=function(){e.service.get("/allRoutes").then(function(t){e.setState(Object(l.a)({},e.state,{allRoutes:t.data.track}))})},e.followTrack=function(t,a){return t.preventDefault(),e.service.post("/".concat(a,"/followRoutes"),a).catch(function(e){return console.log(e)})},e.showRoutesDetails=function(t){e.setState(Object(l.a)({},e.state,{showRouteData:t})),e.props.scrollToRecipe()},e.state={allRoutes:null,followMessage:!1,showRouteData:null},e.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/tracks"),withCredentials:!0}),e.getAllRoutes(),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.allRoutes?this.state.allRoutes.map(function(t){return r.a.createElement(P,{showRoutesDetails:e.props.showRouteData,getAllRoutes:e.getAllRoutes,element:t,followTrack:e.followTrack})}):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("div",{className:"yourRoutes-big-container"},r.a.createElement("h1",{className:"align-center"},"Todas las rutas"),r.a.createElement("div",{className:"show-route-container"},t)))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getAllRoutesFromAUser=function(){var e=a.props.match.params;a.service.get("/users/".concat(e.id,"/users")).then(function(e){console.log(e.data),a.setState(Object(l.a)({},a.state,{user:e.data}))})},a.followTrack=function(e,t){return e.preventDefault(),a.service.post("/tracks/".concat(t,"/followRoutes"),t).then(function(e){a.setState(Object(l.a)({},a.state,{followMessage:!0}))}).then(function(){setTimeout(function(){a.setState(Object(l.a)({},a.state,{followMessage:!1}))},1500)})},a.state={user:null,followMessage:!1},a.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api"),withCredentials:!0}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getAllRoutesFromAUser()}},{key:"render",value:function(){var e=this,t=this.state.followMessage?r.a.createElement("div",{className:"followMessage"},r.a.createElement("div",{className:"MessageContainer"},r.a.createElement("h3",null,"La ruta se ha guardado correctamente"))):r.a.createElement("div",null),a=this.state.user,n=a?r.a.createElement("div",null,r.a.createElement("div",{className:"yourRoutes-big-container"},r.a.createElement("img",{className:"user-photo",src:a.imgPath}),r.a.createElement("h1",null,"Rutas de ",a.username),r.a.createElement("div",{className:"show-route-container"},a.createdTrack.map(function(t){return r.a.createElement("div",{className:"yourRoutes-container"},r.a.createElement("div",{className:"each-Route",style:{backgroundImage:"url(".concat(t.image,")")}}),r.a.createElement("div",{className:"form-container margin-bottom-container-routes"},r.a.createElement("h3",null,t.routesName),t.restaurants.map(function(e){return r.a.createElement("div",{className:"each-stop-on-target"},r.a.createElement("hr",null),r.a.createElement("div",{className:"flex-space-between"},r.a.createElement("a",{href:e.url},r.a.createElement("h4",null,r.a.createElement("img",{src:"./images/ImportedLayers.png",alt:""}),e.restaurantName))),r.a.createElement("div",{className:"restaurant-detail-container"},r.a.createElement("h5",null," Puntuaci\xf3n: ",e.rating),r.a.createElement("h5",null,e.location.city)))}),r.a.createElement("button",{className:"follow-button",onClick:function(a){return e.followTrack(a,t._id)}},"Guardar")))})))):r.a.createElement("div",null);return r.a.createElement("div",null,t,n)}}]),t}(n.Component),q=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).getRankingUsers=function(){return e.service("/ranking").then(function(t){return e.setState(Object(l.a)({},e.state,{everyUsers:t.data}))})},e.getrating=function(){return e.service("/rating").then(function(e){}).catch(function(e){return console.log(e)})},e.state={everyUsers:null},e.service=d.a.create({baseURL:"".concat("https://thefoodroutes.herokuapp.com/api","/ranking"),withCredentials:!0}),e.getRankingUsers(),e.getrating(),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getRankingUsers(),this.getrating()}},{key:"render",value:function(){var e=this.state.everyUsers?this.state.everyUsers.map(function(e,t){var a,n,s,o=e.rating;return o&&(n=(a=o.toFixed(1).toString().split("."))[1],s=a[0]),r.a.createElement("div",{className:"user-ranking"},r.a.createElement("img",{src:e.imgPath}),r.a.createElement("h2",null,t+1,"\xba. "),r.a.createElement("h2",null,e.username,"."),r.a.createElement("h1",{className:"rating"},s,r.a.createElement("sup",{className:"superindex"},"'",n)),r.a.createElement(R.a,{to:"/usersRoutes/".concat(e._id)},r.a.createElement("button",{className:"btn-right"},"Todas las rutas")))}):r.a.createElement("div",null);return r.a.createElement("div",{className:"yourRoutes-big-container user-ranking-container"},r.a.createElement("h1",{className:"ranking"},"Ranking"),e)}}]),t}(n.Component),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).fetchUser=function(){e.authService.loggedin().then(function(t){return e.setState(Object(l.a)({},e.state,{user:t}))})},e.getUser=function(t){e.setState(Object(l.a)({},e.state,{user:t}))},e.logout=function(){e.authService.logout().then(function(){return e.setState(Object(l.a)({},e.state,{user:null}))})},e.createRoutes=function(t){console.log("funci\xf3n: createRoutes. Recibe: (siguiente console.log"),console.log(t),e.setState(Object(l.a)({},e.state,{route:t}))},e.state={user:null,route:null},e.authService=new g,e.inputYelp=new D,e.fetchUser(),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user?r.a.createElement("div",null,r.a.createElement(M,{logout:this.logout}),r.a.createElement(f.a,null,r.a.createElement(E.a,{path:"/profile",render:function(){return r.a.createElement(L,{getUser:e.getUser,user:e.state.user,createRoutes:e.createRoutes})}}),r.a.createElement(E.a,{path:"/allRoutes",render:function(){return r.a.createElement(F,{getUser:e.getUser})}}),r.a.createElement(E.a,{path:"/ranking",render:function(){return r.a.createElement(q,{getUser:e.getUser})}}),r.a.createElement(E.a,{path:"/usersRoutes/:id",component:B}),r.a.createElement(E.a,{path:"/",render:function(){return r.a.createElement(L,{getUser:e.getUser,user:e.state.user,createRoutes:e.createRoutes})}}))):r.a.createElement(E.a,{path:"/",render:function(){return r.a.createElement(O,{getUser:e.getUser,fetchUser:e.fetchUser})}});return r.a.createElement("div",{className:"App"},t)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(410);o.a.render(r.a.createElement(G.a,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[160,2,1]]]);
//# sourceMappingURL=main.64126d3c.chunk.js.map